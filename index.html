<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ADHD Reminder</title>
<style>
body {
  font-family: Arial, sans-serif;
}

.container {
  text-align: center;
  margin-top: 50px;
}

button {
  font-size: 18px;
  padding: 10px 20px;
  margin: 10px;
}

h1 {
  color: #333;
}
</style>
</head>
<body>
<div class="container">
  <h1>ADHD Reminder</h1>
  <button id="recordButton">Record</button>
  <button id="stopButton" disabled>Stop</button>
</div>
<audio id="audio" loop></audio>
<script>
const recordButton = document.getElementById('recordButton');
const stopButton = document.getElementById('stopButton');
const audio = document.getElementById('audio');
let mediaRecorder;
let audioChunks = [];

recordButton.addEventListener('click', startRecording);
stopButton.addEventListener('click', stopRecording);

function startRecording() {
  navigator.mediaDevices.getUserMedia({ audio: true })
    .then(stream => {
      mediaRecorder = new MediaRecorder(stream);
      mediaRecorder.ondataavailable = e => {
        audioChunks.push(e.data);
        if (mediaRecorder.state === 'inactive') {
          const blob = new Blob(audioChunks, { type: 'audio/wav' });
          const url = URL.createObjectURL(blob);
          audio.src = url;
          audio.play();
          setTimeout(() => {
            audio.pause();
            audioChunks = [];
            startRecording(); // Start the loop after 90 seconds pause
          }, 90000);
        }
      };
      mediaRecorder.start();
      recordButton.disabled = true;
      stopButton.disabled = false;
    })
    .catch(err => console.error('Error accessing microphone:', err));
}

function stopRecording() {
  mediaRecorder.stop();
  recordButton.disabled = false;
  stopButton.disabled = true;
}
</script>
</body>
</html>
